@()


<link rel="stylesheet" media="screen" href='@routes.Assets.versioned("stylesheets/jquery.selectareas.css")'>
<link rel="stylesheet" media="screen" href='@routes.Assets.versioned("stylesheets/example.css")'>
<link rel="stylesheet" media="screen" href='@routes.Assets.versioned("stylesheets/jquery-ui.css")'>



<script src='@routes.Assets.versioned("js/jquery.selectareas.js")'></script>
<script src='@routes.Assets.versioned("js/configurator/app.js")'></script>
<script src='@routes.Assets.versioned("js/jquery-ui.js")'></script>
<script src='@routes.Assets.versioned("js/caman.full.js")' type="text/javascript"></script>


<div id="modal-sample-1" class="modal fade">
    <div class="modal-dialog modal-lg">

        <div class="modal-content">
            <div class="modal-header">
                <h4 class="js-title-step"></h4>
            </div>
            <div class="modal-body">
                <div class="row hide" data-step="1" data-title="so much Templatin'">
                    <div class="col-md-12">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-xs-8">
                                    <iframe id="testid" src="@routes.Application.template()"
                                            style="width: 100%; height:700px; border: 0; "></iframe>
                                </div>
                                <!--Zuweisung der Boxen-->
                                <div class="col-xs-2">
                                    <div class="oben">
                                        <button id="metadata" value="Add New" class="btn btn-lila actionOn">
                                            Metadaten
                                        </button>

                                        <button id="text" class="btn btn-lila">
                                            Textfeld
                                        </button>

                                        <button id="bild" class="btn btn-lila">
                                            Bild
                                        </button>


                                    </div>
                                    <div class="mitte">
                                        <p>Hier kommen die Coordinaten</p>

                                        <p id="coordinaten"></p>
                                        <script>
                                            function getValuesOfSelectedArea(area) {
                                                $('#coordinaten').text("heigth: " + area.height + ", width: " + area.width);
                                            }
                                        </script>


                                    </div>

                                    <div class="unten">
                                        <button class="btn btn-lila" data-toggle="modal" data-target="#saveModal">
                                            Speicher dein Template
                                        </button>

                                    </div>
                                    <script>
                                        $('#metadata').click(function () {
                                            document.getElementById('testid').contentWindow.targetFunctionMeta();
                                        });

                                        $('#bild').click(function () {
                                            document.getElementById('testid').contentWindow.targetFunctionBild();
                                        });

                                        $('#text').click(function () {
                                            document.getElementById('testid').contentWindow.targetFunctionText();
                                        });


                                    </script>
                                    <script>
                                        function sendTriggertoIframe() {
                                            document.getElementById('testid').contentWindow.targetFunction();
                                        }
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!----------Zweiter Schritt Bildbearbeiten mit CamanJS-4.1.1-------------------------------------------------------------------------->
                <div class="row hide" data-step="2" data-title="so much Image editin'">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-xs-8 changepanel">

                                <canvas id="canvas" width="300" height="424" class="pimmel"></canvas>


                            </div>
                            <div class="col-xs-2">

                                <div class="mitte">

                                    <!--Erstellen der Schieberegler-->
                                    <p>Helligkeit</p>

                                    <div id="hell" style="width:200px; margin:15px;"></div>
                                    <p>Kontrast</p>

                                    <div id="kontrast" style="width:200px; margin:15px;"></div>


                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row hide" data-step="3" data-title="This is the second and last step!">
                    <div class="col-md-12">
                        <div class="jumbotron text-center"><p>As you can see, this is the third and last step!</p></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default js-btn-step pull-left" data-orientation="cancel"
                        data-dismiss="modal"></button>
                <button type="button" class="btn btn-warning js-btn-step" data-orientation="previous"></button>
                <button type="button" class="btn btn-success js-btn-step" data-orientation="next"></button>
            </div>
        </div>
    </div>
</div>


<script src='@routes.Assets.versioned("jquery-bootstrap-modal-steps-master/jquery-bootstrap-modal-steps.min.js")'
        type="text/javascript"></script>

<script type="text/javascript">
    $('#modal-sample-1').modalSteps();
    $('#modal-sample-2').modalSteps({
        'disableNextButton': true
    });
</script>


<!-- Modal zum Speichern des Templates -->
<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-sm modalX" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Dein Template speichern als</h4>
            </div>

            <div class="modal-body">
                <div class="input-group">
                    <span class="input-lg" id="filename"></span>
                    <input type="text" class="form-control" placeholder="z.B. Rechnung" aria-describedby="basic-addon1">
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-bind="click: saveInFolder" data-dismiss="modal">
                    Speichern als
                </button>
            </div>
        </div>
    </div>
</div>


<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');


    var xCan = 300;
    var yCan = 424;
    /* Enable Cross Origin Image Editing */
    var img = new Image();
    img.crossOrigin = '';
    img.src = '@routes.Assets.versioned("images/rechnungtest.png")';
    img.onload = function () {

        ctx.drawImage(img, 0, 0, xCan, yCan);
    }

    $(function () {
        // setup master volume
        $("#hell").slider({
            min: -100,
            max: 100,
            value: 0,
            orientation: "horizontal",
            range: false,
            animate: true,

            change: function (event, ui) {

                var hellig = parseInt(ui.value);
                Caman('#canvas', img, function () {
                    this.revert(false);
                    this.brightness(hellig);
                    //this.contrast(cntrst);
                    this.render();
                });
            }

        });
    });

    $(function () {
        // setup master volume
        $("#kontrast").slider({
            min: -100,
            max: 100,
            value: 0,
            orientation: "horizontal",
            range: false,
            animate: true,

            change: function (event, ui) {

                var cntrst = parseInt(ui.value);
                Caman('#canvas', img, function () {
                    this.revert(false);
                    //this.brightness(hellig);
                    this.contrast(cntrst);
                    this.render();
                });
            }

        });
    });


</script>
